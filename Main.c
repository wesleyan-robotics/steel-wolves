#pragma config(Hubs,  S1, HTMotor,  HTMotor,  none,     none)
#pragma config(Sensor, S2,     SonarBottom,    sensorSONAR)
#pragma config(Sensor, S3,     SonarTop,       sensorSONAR)
#pragma config(Motor,  motorA,           ,             tmotorNXT, openLoop, encoder)
#pragma config(Motor,  motorB,           ,             tmotorNXT, openLoop, encoder)
#pragma config(Motor,  motorC,           ,             tmotorNXT, openLoop, encoder)
#pragma config(Motor,  mtr_S1_C1_1,     LeftWheel,     tmotorTetrix, openLoop, reversed)
#pragma config(Motor,  mtr_S1_C1_2,     AccordionTop,  tmotorTetrix, openLoop)
#pragma config(Motor,  mtr_S1_C2_1,     AccordionBottom, tmotorTetrix, openLoop)
#pragma config(Motor,  mtr_S1_C2_2,     RightWheel,    tmotorTetrix, openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

// The "master override" swtich
#define        MATCH_BUILD  1

#define TESTING_AUTONOMOUS  0
#define     TESTING_TELEOP  0
#define    DRIVING_ENABLED  1
#define  ACCORDION_ENABLED  1

// NOTE: Include EVERYTHING before Joystick.h
#include "JoystickDriver.c"
#include "Motor.h"
#include "Accordion.h"
#include "Sonar.h"
#include "Joystick.h"

void initRobot()
{
    initMotors(LeftWheel, RightWheel);
    initAccordion(AccordionBottom, AccordionTop);
    initSonars(SonarBottom, SonarTop);
}

void startMatch()
{
	/* Starts to scan for the autonomous period but can be interrupted
     * by moving the joystick once in the tele-op period calling drive()
     */
	StartTask(sonarScan);
	StartTask(joystickWakeup);
}

task main()
{
	initRobot();
	waitForStart();

	#if MATCH_BUILD == 1
		startMatch();
	#elif TESTING_AUTONOMOUS == 1
		StartTask(sonarScan);
    #elif TESTING_TELEOP == 1
    	StartTask(drive);
	#else
		startMatch();
	#endif
}
